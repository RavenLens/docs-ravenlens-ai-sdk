"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[5099],{2561(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"ai-sdk/sessions","title":"Session Management & Recording","description":"RavenLens allows you to track not just the AI interaction, but the user\'s entire journey on the frontend, correlating UI events with AI traces.","source":"@site/docs/ai-sdk/sessions.md","sourceDirName":"ai-sdk","slug":"/ai-sdk/sessions","permalink":"/docs/ai-sdk/sessions","draft":false,"unlisted":false,"editUrl":"https://github.com/RavenLens/documentation-ravenlens-api-sdk/tree/main/docs/ai-sdk/sessions.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Prompt Management","permalink":"/docs/ai-sdk/prompts"},"next":{"title":"AI Tracing & Monitoring","permalink":"/docs/ai-sdk/tracing"}}');var o=s(4848),i=s(8453);const t={},a="Session Management & Recording",d={},c=[{value:"User Interaction Sessions",id:"user-interaction-sessions",level:2},{value:"Frontend Recording",id:"frontend-recording",level:3},{value:"Backend Handling",id:"backend-handling",level:3},{value:"Downloading Sessions",id:"downloading-sessions",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"session-management--recording",children:"Session Management & Recording"})}),"\n",(0,o.jsx)(n.p,{children:"RavenLens allows you to track not just the AI interaction, but the user's entire journey on the frontend, correlating UI events with AI traces."}),"\n",(0,o.jsx)(n.h2,{id:"user-interaction-sessions",children:"User Interaction Sessions"}),"\n",(0,o.jsxs)(n.p,{children:["You can record user sessions using the ",(0,o.jsx)(n.code,{children:"FrontendSessions"})," utility (based on ",(0,o.jsx)(n.code,{children:"rrweb"}),") and upload them to RavenLens."]}),"\n",(0,o.jsx)(n.h3,{id:"frontend-recording",children:"Frontend Recording"}),"\n",(0,o.jsxs)(n.p,{children:["Install ",(0,o.jsx)(n.code,{children:"@ravenlens/ai-sdk"})," in your frontend application."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { FrontendSessions } from '@ravenlens/ai-sdk';\r\n\r\n// Initialize the session manager\r\n// `sessionRetrivingGatewayURL`: Your backend endpoint that handles the upload\r\nconst sessionManager = new FrontendSessions(\r\n    '/api/ravenlens/session-record', \r\n    'your-session-id',  // Optional: Provide if you already have a session ID\r\n    { userId: 'user-123' } // Optional metadata\r\n);\r\n\r\n// Start recording when appropriate\r\nsessionManager.record();\r\n\r\n// Stop and send recording on events like page unload\r\nwindow.addEventListener('beforeunload', async () => {\r\n    await sessionManager.stop();\r\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"backend-handling",children:"Backend Handling"}),"\n",(0,o.jsx)(n.p,{children:"Your backend needs to expose an endpoint to receive the recording and forward it to RavenLens."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { RavenLens } from '@ravenlens/ai-sdk';\r\nimport express from 'express';\r\n\r\nconst app = express();\r\napp.use(express.json({ limit: '50mb' })); // Increase API limit for large recordings\r\n\r\nconst raven = new RavenLens({\r\n    apiKey: process.env.RAVENLENS_API_KEY!,\r\n    appId: process.env.RAVENLENS_APP_ID\r\n});\r\n\r\n// Endpoint to receive recording from frontend\r\napp.post('/api/ravenlens/session-record', async (req, res) => {\r\n    const { sessionId, events } = req.body;\r\n    \r\n    if (!sessionId || !events) {\r\n        return res.status(400).send('Missing data');\r\n    }\r\n\r\n    try {\r\n        // Upload recording to RavenLens\r\n        // - sessionId: Can be an existing ID or generating a New one if needed\r\n        await raven.sessions.upload(sessionId, events);\r\n        res.sendStatus(200);\r\n    } catch (error) {\r\n        res.status(500).send(error.message);\r\n    }\r\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"downloading-sessions",children:"Downloading Sessions"}),"\n",(0,o.jsx)(n.p,{children:"You can programmatically retrieve recorded sessions."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"const recording = await raven.sessions.download(sessionId);\r\nconsole.log(recording);\n"})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453(e,n,s){s.d(n,{R:()=>t,x:()=>a});var r=s(6540);const o={},i=r.createContext(o);function t(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);